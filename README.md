# Tinker-OpenMM: Tinker Interface for OpenMM

<H2><B>Introduction</B></H2>

The Tinker molecular modeling software is a complete and general package for molecular mechanics and dynamics, with some special features for biopolymers. Tinker has the ability to use any of several common parameter sets, such as Amber (ff94, ff96, ff98, ff99, ff99SB), CHARMM (19, 22, 22/CMAP), Allinger MM (MM2-1991 and MM3-2000), OPLS (OPLS-UA, OPLS-AA), Merck Molecular Force Field (MMFF), Liam Dang's polarizable model, and the AMOEBA, AMOEBA+ and HIPPO polarizable atomic multipole force fields. Parameter sets for other widely-used force fields are under consideration for future releases.

The Tinker software contains a variety of interesting algorithms such as: flexible implementation of atomic multipole-based electrostatics with explicit dipole polarizability, various continuum solvation treatments including several generalized Born (GB/SA) models, generalized Kirkwood implicit solvation for AMOEBA, an interface to APBS for Poisson-Boltzmann calculations, efficient truncated Newton (TNCG) local optimization, surface areas and volumes with derivatives, free energy calculations via the Bennett Acceptance Ratio (BAR) method, normal mode vibrational analysis, minimization in Cartesian, torsional or rigid body space, symplectic RESPA multiple time step integration for molecular dynamics, velocity Verlet stochastic dynamics, pairwise neighbor lists and splined spherical energy cutoff methods, particle mesh Ewald (PME) summation for partial charges and polarizable multipoles, a novel reaction field treatment of long range electrostatics, fast distance geometry metrization with better sampling than standard methods, Elber's reaction path algorithm, potential smoothing and search (PSS) methods for global optimization, Monte Carlo Minimization (MCM) for efficient potential surface scanning, tools for fitting charge, multipole and polarization models to QM-based electrostatic potentials and more....

<H2><B>Prerequisites</B></H2>

Prior to building Tinker-OpenMM, you must have available a Linux system with standard development tools, including the GNU compiler suite V7 or later with gcc, g++ and gfortran. We routinely test on Ubuntu 18.04 and 20.04 LTS systems, as well as various versionos of CentOS, but most current Linux distributions should be fine. The system needs to contain a functioning, fairly recent vintage NVIDIA GPU with a working NVIDIA graphics driver. Commodity gaming GPUs from the 700 series onward should work, as will most of the Tesla series commercial/research GPU models. Next, a CUDA toolkit providing the full developemnt must be present. As of late 2020, we recommend installation of CUDA 10.1, 10.2, 11.0 or 11.1, though the older CUDA 9.2 may work as well. We recommend installing CUDA from the corresponding "run" file obtained directly from NVIDIA, instead of getting CUDA through the package manager for your distribution. Installation from the run file will place CUDA into a /usr/local/cuda directory. Various of the setup for building Tinker-OpenMM will look for CUDA under /usr/local.

<H2><B>Building and Installing OpenMM</B></H2>

Prior to building Tinker-OpenMM, you must have available a Linux system with standard development tools, including the GNU compiler suite V7 or later with gcc, g++ and gfortran. We routinely test on Ubuntu 18.04 and 20.04 LTS systems, as well as various versionos of CentOS, but 

<H2><B>Building Tinker-OpenMM from Source Code</B></H2>

Tinker is provided as a complete source distribution. After unpacking the release, you can build a set of Tinker executables on almost any machine with a Fortran compiler. Makefiles, a cmake configure script, as well as standalone scripts to compile, build object libraries, and link executables on a wide variety of machine-CPU-operating system combinations are provided. To build using the Tinker Makefile, just copy /make/Makefile into the /source area of the distribution. Small changes are needed near the top of the file to set directory names and activate the appropriate operating system and compiler. Then issue the "make" command while in the /source directory. As noted below, the FFTW libraries must be available before building Tinker.

Tinker requires two object libraries from the FFTW Fourier transform package, libfftw3.a and libfftw3_threads.a. The FFTW libraries must be available in the one of the locations searched by the Tinker Makefile prior to building Tinker executables. While we do not provide the required FFTW libraries with the Tinker distribution, they are easy to build from the included FFTW source. Just follow the instructions in the /fftw/0README file. Optional support for APBS Poisson-Boltzmann calculations within Tinker requires object libraries from the APBS 1.3 software package, but this is not included in the default Tinker build.

If you do not want to build Tinker youself, pre-built Tinker executables for Linux, MacOS, and Windows are available for download from https://dasher.wustl.edu/tinker/. They should run on most recent vintage machines using these operating systems, and can handle a maximum of 1 million atoms provided sufficient memory is available. The Linux executables require at least glibc-2.6 or later. Note starting with Tinker 8, we no longer provide pre-built executables for any 32-bit operating systems.
